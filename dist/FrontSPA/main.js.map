{"version":3,"sources":["./src/environments/environment.ts","./src/app/models/ThreeScene.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/three-sample/three-sample.component.ts","./src/app/three-sample/three-sample.component.html","./src/services/scene-camera-initialize.service.ts","./src/services/three-data.service.ts","./src/app/app-routing.module.ts","./src/services/change-tracker.service.ts","./src/main.ts","./$_lazy_route_resource lazy namespace object"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import * as THREE from 'three';\r\n\r\nexport class ThreeScene {\r\n  renderer: THREE.WebGLRenderer;\r\n  scene: THREE.Scene;\r\n  camera: THREE.PerspectiveCamera;\r\n  currentStateJsonString: string;\r\n}\r\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  title = 'FrontSPA';\n}\n","<div>\r\n  <ng-content></ng-content>\r\n  <app-three-sample></app-three-sample>\r\n</div>\r\n\r\n<!--<atft-orbit-controls [rotateSpeed]=1 [zoomSpeed]=1.2>\r\n  <atft-renderer-canvas>\r\n    <atft-perspective-camera [fov]=60 [near]=1 [far]=1100\r\n                             positionX=20 positionY=50 positionZ=50>\r\n    </atft-perspective-camera>\r\n    <atft-scene>\r\n      <atft-axes-helper size=200></atft-axes-helper>\r\n      <atft-grid-helper size=100 divisions=10></atft-grid-helper>\r\n    </atft-scene>\r\n  </atft-renderer-canvas>\r\n</atft-orbit-controls>-->\r\n\r\n\r\n<router-outlet></router-outlet>\r\n","import { HttpClientModule } from '@angular/common/http';\r\nimport { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\r\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { ThreeSampleComponent } from './three-sample/three-sample.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    ThreeSampleComponent\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    HttpClientModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\r\nimport * as THREE from 'three';\r\nimport { Injectable } from '@angular/core';\r\nimport { SceneCameraInitializeService } from '../../services/scene-camera-initialize.service';\r\nimport { ChangeTrackerService } from '../../services/change-tracker.service';\r\nimport { ThreeScene } from '../models/ThreeScene';\r\n\r\n@Component({\r\n  selector: 'app-three-sample',\r\n  templateUrl: './three-sample.component.html',\r\n  styleUrls: ['./three-sample.component.css']\r\n})\r\n@Injectable()\r\nexport class ThreeSampleComponent implements OnInit {\r\n\r\n  @ViewChild('rendererContainer') rendererContainer: ElementRef;\r\n\r\n  private threeScene: ThreeScene;\r\n\r\n  constructor(private initializer: SceneCameraInitializeService, private changeTrackerService: ChangeTrackerService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.initializer.InitializeScene().then((threeScene: ThreeScene) => {\r\n      this.threeScene = threeScene;\r\n      this.rendererContainer.nativeElement.appendChild(this.threeScene.renderer.domElement);\r\n      this.animate();\r\n      this.changeTrackerService.start(this.threeScene, 10000);\r\n    });\r\n    \r\n    let clickHandler = this.onDocumentKeyDown.bind(this)\r\n    document.addEventListener('keydown', clickHandler, false);\r\n  }\r\n\r\n  private onDocumentKeyDown(event) {\r\n    event = event || window.event;\r\n    const keycode = event.keyCode;\r\n\r\n    let dir = new THREE.Vector3();\r\n    let camera = this.threeScene.camera;\r\n    camera.getWorldDirection(dir);\r\n\r\n    switch (keycode) {\r\n      case 37: //left arrow\r\n        camera.rotation.y += 0.1;\r\n        break;\r\n      case 38: // up arrow\r\n        camera.position.addScaledVector(new THREE.Vector3(dir.x, 0, dir.z), 10);\r\n        break;\r\n      case 39: // right arrow\r\n        camera.rotation.y -= 0.1;\r\n        break;\r\n      case 40: //down arrow\r\n        camera.position.addScaledVector(new THREE.Vector3(-dir.x, 0, -dir.z), 10);\r\n        break;\r\n    }\r\n\r\n    let keyUp = this.onDocumentKeyUp.bind(this)\r\n    document.addEventListener('keyup', keyUp, false);\r\n  }\r\n\r\n  private onDocumentKeyUp(event) {\r\n    document.removeEventListener('keydown', this.onDocumentKeyDown, false);\r\n  }\r\n\r\n  private animate() {\r\n    window.requestAnimationFrame(() => this.animate());\r\n    //this.controls.update();\r\n    this.threeScene.renderer.render(this.threeScene.scene, this.threeScene.camera);\r\n  }\r\n}\r\n","<div style=\"width: 90%; height: 90%\" #rendererContainer></div>\n","import { Injectable } from '@angular/core';\r\nimport * as THREE from 'three';\r\nimport { ThreeScene } from '../app/models/ThreeScene';\r\nimport { ThreeDataService } from './three-data.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class SceneCameraInitializeService {\r\n  constructor(private threeDataService: ThreeDataService) {  }\r\n\r\n  private threeScene: ThreeScene = new ThreeScene();\r\n  private boxColors = [0x81106B, 0xF2B727, 0xB8E1E9, 0x7A0202];\r\n\r\n  // TODO: move to factory\r\n  public InitializeScene() {\r\n    return new Promise((resolve, _) => {\r\n      this.threeDataService.get().then((res: any) => {\r\n        if (!!res.data) {\r\n          const model = res.data;\r\n          this.threeScene.scene = new THREE.ObjectLoader().parse(model.sceneState);\r\n        }\r\n        else {\r\n          this.threeScene.scene = new THREE.Scene();\r\n          this.threeScene.scene.background = new THREE.Color(0xcccccc);\r\n          this.threeScene.scene.fog = new THREE.FogExp2(0xcccccc, 0.002);\r\n\r\n          // Light\r\n          const dirLight1 = new THREE.DirectionalLight(0xffffff);\r\n          dirLight1.position.set(1, 1, 1);\r\n          this.threeScene.scene.add(dirLight1);\r\n\r\n          const dirLight2 = new THREE.DirectionalLight(0x002288);\r\n          dirLight2.position.set(- 1, - 1, - 1);\r\n          this.threeScene.scene.add(dirLight2);\r\n\r\n          const ambientLight = new THREE.AmbientLight(0x222222);\r\n          this.threeScene.scene.add(ambientLight);\r\n\r\n          // Models\r\n          const geometry = new THREE.BoxGeometry(1, 1, 1);\r\n          geometry.translate(0, 0.5, 0);\r\n\r\n          for (let i = 0; i < 100; i++) {\r\n            const i1 = i % 4;\r\n            const material = new THREE.MeshPhongMaterial({ color: this.boxColors[i1], flatShading: true });\r\n            const mesh = new THREE.Mesh(geometry, material);\r\n            mesh.position.x = Math.random() * 1600 - 800;\r\n            mesh.position.y = 0;\r\n            mesh.position.z = Math.random() * 1600 - 800;\r\n            mesh.scale.x = 20;\r\n            mesh.scale.y = Math.random() * 80 + 10;\r\n            mesh.scale.z = 20;\r\n            mesh.updateMatrix();\r\n            mesh.matrixAutoUpdate = false;\r\n            this.threeScene.scene.add(mesh);\r\n          }\r\n        }\r\n\r\n        //let self = this;\r\n        //let color = new THREE.Color(0xB8E1E9);\r\n        //this.scene.traverse(function (node) {\r\n        //  if (node instanceof THREE.Mesh) {\r\n        //    if (node.material.color.equals(color))\r\n        //      self.redBoxes.push(node);\r\n        //  }\r\n        //});\r\n\r\n        this.threeScene.renderer = new THREE.WebGLRenderer({ antialias: true });\r\n        this.threeScene.renderer.setPixelRatio(window.devicePixelRatio);\r\n        this.threeScene.renderer.setSize(window.innerWidth, window.innerHeight);\r\n        document.body.appendChild(this.threeScene.renderer.domElement);\r\n\r\n        this.threeScene.camera = new THREE.PerspectiveCamera(90, window.innerWidth / window.innerHeight, 1, 1000);\r\n        this.threeScene.camera.position.set(400, 200, 0);\r\n        if (!res.data) {\r\n\r\n          this.threeScene.currentStateJsonString = JSON.stringify({\r\n            sceneState: this.threeScene.scene.toJSON(),\r\n            cameraState: this.threeScene.camera.matrix.toArray()\r\n          });\r\n        }\r\n        else {\r\n          this.threeScene.currentStateJsonString = res.data;\r\n\r\n          const model = res.data;\r\n          this.threeScene.camera.matrix.fromArray(model.cameraState);\r\n          this.threeScene.camera.matrix.decompose(this.threeScene.camera.position, this.threeScene.camera.quaternion, this.threeScene.camera.scale);\r\n        }\r\n\r\n        this.threeScene.renderer.setSize(window.innerWidth, window.innerHeight);\r\n\r\n        resolve(this.threeScene);\r\n      });\r\n    });\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ThreeDataService {\r\n  constructor(private http: HttpClient) {  }\r\n\r\n  public get() {\r\n    return this.http.get('api/').toPromise();\r\n  }\r\n\r\n  public save(data) {\r\n    this.http.post('api/save', { data: data }).subscribe((error) => console.log(error));\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nconst routes: Routes = [];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { Injectable } from '@angular/core';\r\nimport { ThreeScene } from '../app/models/ThreeScene';\r\nimport { ThreeDataService } from './three-data.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ChangeTrackerService {\r\n\r\n  private threeScene: ThreeScene;\r\n  private timerId = null;\r\n\r\n  constructor(private threeDataService: ThreeDataService) {  }\r\n\r\n  public start(threeScene: ThreeScene, period: number) {\r\n    this.threeScene = threeScene;\r\n\r\n    this.timerId = setInterval(() => {\r\n      const newState = {\r\n        sceneState: this.threeScene.scene.toJSON(),\r\n        cameraState: this.threeScene.camera.matrix.toArray()\r\n      }\r\n      const newJsonString = JSON.stringify(newState);\r\n\r\n      if (!!this.threeScene.currentStateJsonString && this.threeScene.currentStateJsonString !== newJsonString) {\r\n        this.threeScene.currentStateJsonString = newJsonString;\r\n        this.threeDataService.save(newState);\r\n      }\r\n    }, period);\r\n  }\r\n\r\n  // TODO: can be moved to component if we want to reuse this service\r\n  ngOnDestroy() {\r\n    if (this.timerId)\r\n      clearInterval(this.timerId);\r\n  }\r\n}\r\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"],"sourceRoot":"webpack:///"}